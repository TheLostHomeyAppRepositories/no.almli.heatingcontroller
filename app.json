{
  "id": "no.almli.heatingcontroller",
  "version": "0.2.0",
  "compatibility": ">=2.0.0",
  "sdk": 2,
  "name": {
    "en": "HeatingController"
  },
  "description": {
    "en": "HeatingController"
  },
  "category": [
    "tools"
  ],
  "permissions": [
  ],
  "images": {
    "large": "/assets/images/large.png",
    "small": "/assets/images/small.png"
  },
  "author": {
    "name": "Bjørnar Almli",
    "email": "bjornar.almli@gmail.com"
  },
  "contributors": {
    "developers": [
      {
        "name": "Bjørnar Almli",
        "email": "bjornar.almli@gmail.com"
      }
    ]
  },
  "flow": {
    "triggers": [
      {
        "id": "night_starts",
        "title": {
          "en": "Night starts"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "night_ends",
        "title": {
          "en": "Night ends"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "at_work_starts",
        "title": {
          "en": "At work starts"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "at_work_ends",
        "title": {
          "en": "At work ends"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "comfort_mode",
        "title": {
          "en": "Comfort mode"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "eco_mode",
        "title": {
          "en": "ECO mode"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "price_changed",
        "title": {
          "en": "Utility price changed"
        },
        "tokens": [
          {
            "name": "price",
            "type": "number",
            "title": {
              "en": "price"
            }
          },
          {
            "name": "priceArea",
            "type": "string",
            "title": {
              "en": "price area"
            }
          },
          {
            "name": "currency",
            "type": "string",
            "title": {
              "en": "currency"
            }
          }
        ],
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "high_x_hours_of_day",
        "title": {
          "en": "High prices [x] hours of the day"
        },
        "tokens": [
          {
            "name": "heating",
            "type": "boolean",
            "title": {
              "en": "heating"
            }
          },
          {
            "name": "high_price",
            "type": "boolean",
            "title": {
              "en": "high_price"
            }
          }
        ],
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          },
          {
            "name": "high_hours",
            "type": "number",
            "placeholder": {
              "en": "high_hours"
            }
          }
        ]
      },
      {
        "id": "low_x_hours_of_day",
        "title": {
          "en": "Low prices [x] hours of the day"
        },
        "tokens": [
          {
            "name": "heating",
            "type": "boolean",
            "title": {
              "en": "heating"
            }
          },
          {
            "name": "low_price",
            "type": "boolean",
            "title": {
              "en": "low_price"
            }
          }
        ],
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          },
          {
            "name": "low_hours",
            "type": "number",
            "placeholder": {
              "en": "low_hours"
            }
          }
        ]
      }
    ],
    "conditions": [
      {
        "id": "is_home",
        "title": {
          "en": "Is !{{home|away}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "is_home_override",
        "title": {
          "en": "Is home override !{{on|off}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "is_night",
        "title": {
          "en": "Is !{{night|day}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "is_at_work",
        "title": {
          "en": "Is !{{at work|not at work}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "is_heating_on",
        "title": {
          "en": "Is !{{comfort mode|ECO mode}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      }
    ],
    "actions": [
      {
        "id": "set_at_home_on",
        "title": {
          "en": "Set home"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "set_at_home_off",
        "title": {
          "en": "Set away"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "set_home_override_on",
        "title": {
          "en": "Set home override on"
        },
        "hint": {
          "en": "True will keep heating on even if at work"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "set_home_override_off",
        "title": {
          "en": "Set home override off"
        },
        "hint": {
          "en": "True will keep heating on even if at work"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      }
    ]
  },
  "drivers": [
    {
      "id": "HeatingController",
      "name": {
        "en": "HeatingController"
      },
      "class": "other",
      "capabilities": [
        "onoff",
        "home_override",
        "night",
        "at_work",
        "heating",
        "price"
      ],
      "capabilitiesOptions": {
        "onoff": {
          "titleTrue": {
            "en": "Home"
          },
          "titleFalse": {
            "en": "Away"
          }
        },
        "night": {
          "titleTrue": {
            "en": "Night"
          },
          "titleFalse": {
            "en": "Day"
          }
        },
        "at_work": {
          "titleTrue": {
            "en": "At work"
          },
          "titleFalse": {
            "en": "Not at work"
          }
        },
        "heating": {
          "titleTrue": {
            "en": "Heating on"
          },
          "titleFalse": {
            "en": "Heating off"
          }
        }
      },
      "settings": [
        {
          "type": "group",
          "label": {
            "en": "Period settings"
          },
          "children": [
            {
              "id": "workdayStartHour",
              "type": "number",
              "label": {
                "en": "Start hour workingdays"
              },
              "value": 5,
              "hint": {
                "en": "Hour the comfort mode will be enabled for working days"
              }
            },
            {
              "id": "workdayEndHour",
              "type": "number",
              "label": {
                "en": "End hour workingdays"
              },
              "value": 22.5,
              "hint": {
                "en": "Hour the ECO mode will be enabled for working days"
              }
            },
            {
              "id": "notWorkdayStartHour",
              "type": "number",
              "label": {
                "en": "Start hour not workingdays"
              },
              "value": 7,
              "hint": {
                "en": "Hour the comfort mode will be enabled for weekends and holidays"
              }
            },
            {
              "id": "notWorkdayEndHour",
              "type": "number",
              "label": {
                "en": "End hour not workingdays"
              },
              "value": 23,
              "hint": {
                "en": "Hour the ECO mode will be enabled for weekends and holidays"
              }
            },
            {
              "id": "workHoursStartHour",
              "type": "number",
              "label": {
                "en": "Hour starting at work"
              },
              "value": 7,
              "hint": {
                "en": "Hour starting at work, which will enable ECO mode"
              }
            },
            {
              "id": "workHoursEndHour",
              "type": "number",
              "label": {
                "en": "Hour finished at work"
              },
              "value": 14,
              "hint": {
                "en": "Hour finished at work, which will enable comfort mode"
              }
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Price settings"
          },
          "children": [
            {
              "id": "priceArea",
              "type": "dropdown",
              "label": {
                "en": "Price area"
              },
              "value": "Oslo",
              "values": [
                {
                  "id": "SE1",
                  "label": {
                    "en": "Sweden - SE1"
                  }
                },
                {
                  "id": "SE2",
                  "label": {
                    "en": "Sweden - SE2"
                  }
                },
                {
                  "id": "SE3",
                  "label": {
                    "en": "Sweden - SE3"
                  }
                },
                {
                  "id": "SE4",
                  "label": {
                    "en": "Sweden - SE4"
                  }
                },
                {
                  "id": "DK1",
                  "label": {
                    "en": "Sweden - DK1"
                  }
                },
                {
                  "id": "DK2",
                  "label": {
                    "en": "Sweden - DK2"
                  }
                },
                {
                  "id": "FI",
                  "label": {
                    "en": "Finland - FI"
                  }
                },
                {
                  "id": "Oslo",
                  "label": {
                    "en": "Norway - Oslo"
                  }
                },
                {
                  "id": "Kr.sand",
                  "label": {
                    "en": "Norway - Kr.sand"
                  }
                },
                {
                  "id": "Bergen",
                  "label": {
                    "en": "Norway - Bergen"
                  }
                },
                {
                  "id": "Molde",
                  "label": {
                    "en": "Norway - Molde"
                  }
                },
                {
                  "id": "Tr.heim",
                  "label": {
                    "en": "Norway - Tr.heim"
                  }
                },
                {
                  "id": "Tromsø",
                  "label": {
                    "en": "Norway - Tromsø"
                  }
                },
                {
                  "id": "EE",
                  "label": {
                    "en": "Estonia - EE"
                  }
                },
                {
                  "id": "LV",
                  "label": {
                    "en": "Latvia - LV"
                  }
                },
                {
                  "id": "LT",
                  "label": {
                    "en": "Lithuania -LT"
                  }
                }
              ]
            },
            {
              "id": "currency",
              "type": "dropdown",
              "label": {
                "en": "Currency"
              },
              "value": "EUR",
              "values": [
                {
                  "id": "EUR",
                  "label": {
                    "en": "EUR"
                  }
                },
                {
                  "id": "DKK",
                  "label": {
                    "en": "DKK"
                  }
                },
                {
                  "id": "NOK",
                  "label": {
                    "en": "NOK"
                  }
                },
                {
                  "id": "SEK",
                  "label": {
                    "en": "SEK"
                  }
                }
              ]
            }
          ]
        }
      ],
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_my_devices"
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices"
        }
      ],
      "images": {
        "large": "/drivers/HeatingController/assets/images/large.png",
        "small": "/drivers/HeatingController/assets/images/small.png"
      }
    }
  ],
  "capabilities": {
    "at_home": {
      "type": "boolean",
      "title": {
        "en": "At home"
      },
      "desc": {
        "en": "At home or not home"
      },
      "getable": true,
      "setable": false,
      "greyout": true,
      "icon": "/drivers/HeatingController/assets/images/house.svg"
    },
    "home_override": {
      "type": "boolean",
      "title": {
        "en": "Home override"
      },
      "desc": {
        "en": "Will turn on heating even if at work"
      },
      "getable": true,
      "setable": false,
      "greyout": true,
      "icon": "/drivers/HeatingController/assets/images/house.svg"
    },
    "night": {
      "type": "boolean",
      "title": {
        "en": "Night"
      },
      "desc": {
        "en": "Night or day"
      },
      "getable": true,
      "setable": false,
      "greyout": true,
      "icon": "/drivers/HeatingController/assets/images/night.svg"
    },
    "at_work": {
      "type": "boolean",
      "title": {
        "en": "At work"
      },
      "desc": {
        "en": "At work or not at work"
      },
      "getable": true,
      "setable": false,
      "greyout": true,
      "icon": "/drivers/HeatingController/assets/images/work.svg"
    },
    "heating": {
      "type": "boolean",
      "title": {
        "en": "Heating"
      },
      "desc": {
        "en": "Heating on or off"
      },
      "getable": true,
      "setable": false,
      "greyout": true,
      "icon": "/drivers/HeatingController/assets/images/onoff.svg"
    },
    "price": {
      "type": "number",
      "title": {
        "en": "Current price"
      },
      "getable": true,
      "setable": false
    }
  }
}
