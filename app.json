{
  "id": "no.almli.heatingcontroller",
  "version": "0.1.0",
  "compatibility": ">=1.5.0",
  "sdk": 2,
  "name": {
    "en": "HeatingController"
  },
  "description": {
    "en": "HeatingController"
  },
  "category": [
    "tools"
  ],
  "permissions": [
  ],
  "images": {
    "large": "/assets/images/large.png",
    "small": "/assets/images/small.png"
  },
  "author": {
    "name": "Bjørnar Almli",
    "email": "bjornar.almli@gmail.com"
  },
  "contributors": {
    "developers": [
      {
        "name": "Bjørnar Almli",
        "email": "bjornar.almli@gmail.com"
      }
    ]
  },
  "flow": {
    "triggers": [
      {
        "id": "night_starts",
        "title": {
          "en": "Night starts"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "night_ends",
        "title": {
          "en": "Night ends"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "at_work_starts",
        "title": {
          "en": "At work starts"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "at_work_ends",
        "title": {
          "en": "At work ends"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "set_heat_on",
        "title": {
          "en": "Heating on"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "set_heat_off",
        "title": {
          "en": "Heating off"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "price_changed",
        "title": {
          "en": "Utility price changed"
        },
        "tokens": [
          {
            "name": "price",
            "type": "number",
            "title": {
              "en": "price"
            }
          },
          {
            "name": "priceArea",
            "type": "string",
            "title": {
              "en": "price area"
            }
          },
          {
            "name": "currency",
            "type": "string",
            "title": {
              "en": "currency"
            }
          }
        ],
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "low_price_heating",
        "title": {
          "en": "Heating on if low price"
        },
        "tokens": [
          {
            "name": "onoff",
            "type": "boolean",
            "title": {
              "en": "onoff"
            }
          }
        ],
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          },
          {
            "name": "low_hours",
            "type": "number",
            "placeholder": {
              "en": "low_hours"
            }
          }
        ]
      },
      {
        "id": "low_x_hours_of_day",
        "title": {
          "en": "Low price [x] hours of the day"
        },
        "tokens": [
          {
            "name": "onoff",
            "type": "boolean",
            "title": {
              "en": "onoff"
            }
          }
        ],
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          },
          {
            "name": "low_hours",
            "type": "number",
            "placeholder": {
              "en": "low_hours"
            }
          }
        ]
      }
    ],
    "conditions": [
      {
        "id": "is_home",
        "title": {
          "en": "Is !{{home|away}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "is_home_override",
        "title": {
          "en": "Is home override !{{on|off}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "is_night",
        "title": {
          "en": "Is !{{night|day}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "is_at_work",
        "title": {
          "en": "Is !{{at work|not at work}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "is_heating_on",
        "title": {
          "en": "Is heating !{{on|off}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      }
    ],
    "actions": [
      {
        "id": "set_at_home_on",
        "title": {
          "en": "Set home"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "set_at_home_off",
        "title": {
          "en": "Set away"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "set_home_override_on",
        "title": {
          "en": "Set home override on"
        },
        "hint": {
          "en": "True will keep heating on even if at work"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "set_home_override_off",
        "title": {
          "en": "Set home override off"
        },
        "hint": {
          "en": "True will keep heating on even if at work"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      }
    ]
  },
  "drivers": [
    {
      "id": "HeatingController",
      "name": {
        "en": "HeatingController"
      },
      "class": "other",
      "capabilities": [
        "onoff",
        "home_override",
        "night",
        "at_work",
        "heating",
        "price"
      ],
      "capabilitiesOptions": {
        "onoff": {
          "titleTrue": {
            "en": "Home"
          },
          "titleFalse": {
            "en": "Away"
          }
        },
        "night": {
          "titleTrue": {
            "en": "Night"
          },
          "titleFalse": {
            "en": "Day"
          }
        },
        "at_work": {
          "titleTrue": {
            "en": "At work"
          },
          "titleFalse": {
            "en": "Not at work"
          }
        },
        "heating": {
          "titleTrue": {
            "en": "Heating on"
          },
          "titleFalse": {
            "en": "Heating off"
          }
        }
      },
      "mobile": {
        "components": [
          {
            "id": "icon",
            "capabilities": [
              "onoff"
            ]
          },
          {
            "id": "sensor",
            "capabilities": [
              "home_override",
              "night",
              "at_work",
              "heating",
              "price"
            ]
          }
        ]
      },
      "settings": [
        {
          "type": "group",
          "label": {
            "en": "General settings"
          },
          "children": [
            {
              "id": "priceArea",
              "type": "dropdown",
              "label": {
                "en": "Price area"
              },
              "value": "Oslo",
              "values": [
                {
                  "id": "SE1",
                  "label": {
                    "en": "SE - SE1"
                  }
                },
                {
                  "id": "SE2",
                  "label": {
                    "en": "SE - SE2"
                  }
                },
                {
                  "id": "SE3",
                  "label": {
                    "en": "SE - SE3"
                  }
                },
                {
                  "id": "SE4",
                  "label": {
                    "en": "SE - SE4"
                  }
                },
                {
                  "id": "DK1",
                  "label": {
                    "en": "DK - DK1"
                  }
                },
                {
                  "id": "DK2",
                  "label": {
                    "en": "DK - DK2"
                  }
                },
                {
                  "id": "FI",
                  "label": {
                    "en": "FI"
                  }
                },
                {
                  "id": "Oslo",
                  "label": {
                    "en": "NO - Oslo"
                  }
                },
                {
                  "id": "Kr.sand",
                  "label": {
                    "en": "NO - Kr.sand"
                  }
                },
                {
                  "id": "Bergen",
                  "label": {
                    "en": "NO - Bergen"
                  }
                },
                {
                  "id": "Molde",
                  "label": {
                    "en": "NO - Molde"
                  }
                },
                {
                  "id": "Tr.heim",
                  "label": {
                    "en": "NO - Tr.heim"
                  }
                },
                {
                  "id": "Tromsø",
                  "label": {
                    "en": "NO - Tromsø"
                  }
                },
                {
                  "id": "EE",
                  "label": {
                    "en": "EE"
                  }
                },
                {
                  "id": "LV",
                  "label": {
                    "en": "LV"
                  }
                },
                {
                  "id": "LT",
                  "label": {
                    "en": "LT"
                  }
                }
              ]
            },
            {
              "id": "currency",
              "type": "dropdown",
              "label": {
                "en": "Currency"
              },
              "value": "EUR",
              "values": [
                {
                  "id": "EUR",
                  "label": {
                    "en": "EUR"
                  }
                },
                {
                  "id": "DKK",
                  "label": {
                    "en": "DKK"
                  }
                },
                {
                  "id": "NOK",
                  "label": {
                    "en": "NOK"
                  }
                },
                {
                  "id": "SEK",
                  "label": {
                    "en": "SEK"
                  }
                }
              ]
            }
          ]
        }
      ],
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_my_devices"
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices"
        }
      ],
      "images": {
        "large": "/drivers/HeatingController/assets/images/large.png",
        "small": "/drivers/HeatingController/assets/images/small.png"
      }
    }
  ],
  "capabilities": {
    "at_home": {
      "type": "boolean",
      "title": {
        "en": "At home"
      },
      "desc": {
        "en": "At home or not home"
      },
      "getable": true,
      "setable": false,
      "greyout": true,
      "icon": "/drivers/HeatingController/assets/images/house.svg"
    },
    "home_override": {
      "type": "boolean",
      "title": {
        "en": "Home override"
      },
      "desc": {
        "en": "Will turn on heating even if at work"
      },
      "getable": true,
      "setable": false,
      "greyout": true,
      "icon": "/drivers/HeatingController/assets/images/house.svg"
    },
    "night": {
      "type": "boolean",
      "title": {
        "en": "Night"
      },
      "desc": {
        "en": "Night or day"
      },
      "getable": true,
      "setable": false,
      "greyout": true,
      "icon": "/drivers/HeatingController/assets/images/night.svg"
    },
    "at_work": {
      "type": "boolean",
      "title": {
        "en": "At work"
      },
      "desc": {
        "en": "At work or not at work"
      },
      "getable": true,
      "setable": false,
      "greyout": true,
      "icon": "/drivers/HeatingController/assets/images/work.svg"
    },
    "heating": {
      "type": "boolean",
      "title": {
        "en": "Heating"
      },
      "desc": {
        "en": "Heating on or off"
      },
      "getable": true,
      "setable": false,
      "greyout": true,
      "icon": "/drivers/HeatingController/assets/images/onoff.svg"
    },
    "price": {
      "type": "number",
      "title": {
        "en": "Current price"
      },
      "getable": true,
      "setable": false
    }
  }
}
