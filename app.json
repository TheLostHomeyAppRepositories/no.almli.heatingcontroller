{
  "id": "no.almli.heatingcontroller",
  "version": "0.0.1",
  "compatibility": ">=1.5.0",
  "sdk": 2,
  "name": {
    "en": "HeatingController"
  },
  "description": {
    "en": "HeatingController"
  },
  "category": [
    "tools"
  ],
  "permissions": [
  ],
  "images": {
    "large": "/assets/images/large.png",
    "small": "/assets/images/small.png"
  },
  "author": {
    "name": "Bjørnar Almli",
    "email": "bjornar.almli@gmail.com"
  },
  "contributors": {
    "developers": [
      {
        "name": "Bjørnar Almli",
        "email": "bjornar.almli@gmail.com"
      }
    ]
  },
  "flow": {
    "triggers": [
      {
        "id": "night_starts",
        "title": {
          "en": "Night starts"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "night_ends",
        "title": {
          "en": "Night ends"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "at_work_starts",
        "title": {
          "en": "At work starts"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "at_work_ends",
        "title": {
          "en": "At work ends"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "set_heat_on",
        "title": {
          "en": "Set heat on"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "set_heat_off",
        "title": {
          "en": "Set heat off"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      }
    ],
    "conditions": [
      {
        "id": "is_home",
        "title": {
          "en": "Is !{{home|away}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "is_home_override",
        "title": {
          "en": "Is home override !{{on|off}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "is_night",
        "title": {
          "en": "Is !{{night|day}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "is_at_work",
        "title": {
          "en": "Is !{{at work|not at work}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      },
      {
        "id": "is_heating_on",
        "title": {
          "en": "Is heating !{{on|off}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=HeatingController"
          }
        ]
      }
    ],
    "actions": [
      {
        "id": "set_at_home_on",
        "title": {
          "en": "Set home"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=TF_Thermostat"
          }
        ]
      },
      {
        "id": "set_at_home_off",
        "title": {
          "en": "Set away"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=TF_Thermostat"
          }
        ]
      },
      {
        "id": "set_home_override_on",
        "title": {
          "en": "Set home override on"
        },
        "hint": {
          "en": "True will keep heating on even if at work"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=TF_Thermostat"
          }
        ]
      },
      {
        "id": "set_home_override_off",
        "title": {
          "en": "Set home override off"
        },
        "hint": {
          "en": "True will keep heating on even if at work"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=TF_Thermostat"
          }
        ]
      }
    ]
  },
  "drivers": [
    {
      "id": "HeatingController",
      "name": {
        "en": "HeatingController"
      },
      "class": "other",
      "capabilities": [
        "onoff",
        "home_override",
        "night",
        "at_work",
        "heating"
      ],
      "capabilitiesOptions": {
        "at_home": {
          "greyout": true
        }
      },
      "mobile": {
        "components": [
          {
            "id": "icon",
            "capabilities": [
              "onoff"
            ]
          },
          {
            "id": "sensor",
            "capabilities": [
              "heating"
            ],
            "options": {
              "icons": {
                "heating": "/drivers/HeatingController/assets/images/onoff.svg"
              },
              "heating": {
                "noblink": false,
                "greyout": true,
                "label": {
                  "true": {
                    "en": "Heating on"
                  },
                  "false": {
                    "en": "Heating off"
                  }
                }
              }
            }
          }
        ]
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_my_devices"
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices"
        }
      ],
      "images": {
        "large": "/drivers/HeatingController/assets/images/large.png",
        "small": "/drivers/HeatingController/assets/images/small.png"
      }
    }
  ],
  "capabilities": {
    "at_home": {
      "type": "boolean",
      "title": {
        "en": "At home"
      },
      "desc": {
        "en": "At home or not home"
      },
      "getable": true,
      "setable": false,
      "greyout": true
    },
    "home_override": {
      "type": "boolean",
      "title": {
        "en": "Home override"
      },
      "desc": {
        "en": "Will turn on heating even if at work"
      },
      "getable": true,
      "setable": false,
      "greyout": true
    },
    "night": {
      "type": "boolean",
      "title": {
        "en": "Night"
      },
      "desc": {
        "en": "Night or day"
      },
      "getable": true,
      "setable": false,
      "greyout": true
    },
    "at_work": {
      "type": "boolean",
      "title": {
        "en": "At work"
      },
      "desc": {
        "en": "At work or not at work"
      },
      "getable": true,
      "setable": false,
      "greyout": true
    },
    "heating": {
      "type": "boolean",
      "title": {
        "en": "Heating"
      },
      "desc": {
        "en": "Heating on or off"
      },
      "getable": true,
      "setable": false,
      "greyout": true
    }
  }
}
